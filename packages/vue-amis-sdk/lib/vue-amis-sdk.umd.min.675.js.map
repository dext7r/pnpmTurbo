{"version":3,"file":"vue-amis-sdk.umd.min.675.js","mappings":"2OAuJIA,E,UAvGJ,SAASC,EAAaC,EAAMC,GAC1BC,KAAKC,MAAQH,EACbE,KAAKE,WAAa,CAAC,MAAO,OAC1BF,KAAKG,WAAa,CAAC,EAAG,GACtBH,KAAKI,KAAOL,EACZC,KAAKK,YAAc,IAAIC,KAAKC,kBAC9B,CAmFA,SAASC,EAAgBC,EAAUC,GAEjC,OADAA,EAAWA,GAAY,CAAC,EAAG,GACpB,WAAW,CAAC,EAAG,IAAI,SAAUC,GAClC,IAAIC,EAAMF,EAASC,GACfE,EAAWJ,EAASE,GAAU,EAC9BG,EAAK,GACLC,EAAK,GAIT,OAHAD,EAAGH,GAAUC,EAAMC,EACnBE,EAAGJ,GAAUC,EAAMC,EACnBC,EAAG,EAAIH,GAAUI,EAAG,EAAIJ,GAAUD,EAAS,EAAIC,GACxCK,KAAKC,IAAIjB,KAAKkB,YAAYJ,GAAIH,GAAUX,KAAKkB,YAAYH,GAAIJ,GACtE,GAAGX,KACL,CAMA,SAASmB,IACP,SAASvB,EAAQwB,GACfpB,KAAKqB,MAAQD,CACf,CAqBA,OAnBAxB,EAAQ0B,UAAY,IAAIhB,KAAKV,QAQ7BA,EAAQ0B,UAAUC,WAAa,SAAUC,GAEvC,OADAA,EAAIC,WAAWC,UAAUC,YAAY3B,KAAKqB,OACnCrB,KAAKqB,KACd,EAMAzB,EAAQ0B,UAAUM,KAAO,WAAa,EAE/BhC,CACT,CA5HAC,EAAayB,UAAUO,KAAO,OAC9BhC,EAAayB,UAAUpB,WAAa,CAAC,MAAO,OAE5CL,EAAayB,UAAUQ,QAAU,SAAUC,GACzC/B,KAAKgC,MAAQD,CACf,EAEAlC,EAAayB,UAAUW,UAAY,SAAUC,GAC3ClC,KAAKmC,QAAUnC,KAAKK,YAAY+B,cAAc,IAAI9B,KAAK+B,MAAMH,EAAO,GAAIA,EAAO,IACjF,EAEArC,EAAayB,UAAUgB,aAAe,SAAUC,GAC9CvC,KAAKG,WAAaoC,CACpB,EAEA1C,EAAayB,UAAUkB,QAAU,WAC/B,OAAOxC,KAAKC,KACd,EAEAJ,EAAayB,UAAUJ,YAAc,SAAUuB,GAC7C,IAAIC,EAAQ,IAAIpC,KAAK+B,MAAMI,EAAK,GAAIA,EAAK,IAUrCE,EAAK3C,KAAKC,MAAM2C,oBAAoBF,GAEpCH,EAAYvC,KAAKG,WACrB,MAAO,CAACwC,EAAGE,EAAIN,EAAU,GAAII,EAAGG,EAAIP,EAAU,GAChD,EAEA1C,EAAayB,UAAUyB,YAAc,SAAUC,GAC7C,IAAIT,EAAYvC,KAAKG,WAKrB,OAJA6C,EAAKhD,KAAKC,MAAMgD,oBAAoB,CAClCJ,EAAGG,EAAG,GAAKT,EAAU,GACrBO,EAAGE,EAAG,GAAKT,EAAU,KAEhB,CAACS,EAAGE,IAAKF,EAAGG,IACrB,EAEAtD,EAAayB,UAAU8B,YAAc,WACnC,IAAIrD,EAAMC,KAAKI,KACf,OAAO,IAAI,EAAAiD,QAAA,aAAqB,EAAG,EAAGtD,EAAIuD,WAAYvD,EAAIwD,YAC5D,EAEA1D,EAAayB,UAAUkC,iBAAmB,WACxC,OAAO,EAAAC,OAAA,QACT,EAEA5D,EAAayB,UAAUoC,eAAiB,WACtC,IAAIC,EAAO3D,KAAKoD,cAChB,MAAO,CACLQ,SAAU,CAER/B,KAAM,OACNgB,EAAGc,EAAKd,EACRC,EAAGa,EAAKb,EACRe,MAAOF,EAAKE,MACZC,OAAQH,EAAKG,QAEf/D,IAAK,CACHgE,MAAO,YAAY/D,KAAKkB,YAAalB,MACrCgE,KAAM,YAAYxD,EAAiBR,OAGzC,EAEAH,EAAayB,UAAU2C,eAAiB,SAAUC,EAASC,EAAQC,GAEjE,OAAOpE,KAAKkB,YAAYkD,EAC1B,EAEAvE,EAAayB,UAAU+C,iBAAmB,SAAUH,EAASC,EAAQC,GACnE,OAAOpE,KAAK+C,YAAYqB,EAC1B,EAkBAvE,EAAaK,WAAaL,EAAayB,UAAUpB,WA6BjDL,EAAayE,OAAS,SAAUJ,EAASnE,GACvC,IAAIwE,EACAnD,EAAOrB,EAAIyE,SAqFf,OAnFAN,EAAQO,cAAc,QAAQ,SAAUC,GACtC,IAaI5E,EAbA6E,EAAU5E,EAAI6E,QAAQD,QACtBE,EAAeF,EAAQG,kBAE3B,GAAoB,qBAATxE,KACT,MAAM,IAAIyE,MAAM,0BAKlB,GAFAnF,EAAUA,GAAWuB,IAEjBoD,EACF,MAAM,IAAIQ,MAAM,qCAKlB,IAAKL,EAAUM,OAAQ,CAErB,IAAIC,EAAW7D,EAAK8D,cAAc,sBAE9BD,IAGFJ,EAAaM,MAAMC,KAAO,MAC1BP,EAAaM,MAAME,IAAM,MACzBjE,EAAKkE,YAAYL,IAGnBA,EAAWM,SAASC,cAAc,OAClCP,EAASQ,UAAY,oBAErBR,EAASE,MAAMO,QAAU,2CACzBtE,EAAKO,YAAYsD,GAEjB,IAAIU,EAAajB,EAAUkB,IAAI,cAE3BD,IACFA,EAAa,aAAaA,UAEnBA,EAAWE,SAGpB/F,EAAO4E,EAAUM,OAAS,IAAI1E,KAAKwF,IAAIb,EAAUU,GACjD,IAAII,EAAU,IAAInG,EAAQiF,GAC1B/E,EAAKkG,WAAWD,GAEhBpB,EAAQsB,sBAAwB,WAC9B,MAAO,CACLC,WAAY,EACZC,UAAW,EAEf,CACF,CAEArG,EAAO4E,EAAUM,OAGjB,IAAI9C,EAASwC,EAAUkB,IAAI,UACvB7D,EAAO2C,EAAUkB,IAAI,QAEzB,GAAI1D,GAAUH,EAAM,CAClB,IAAIqE,EAAatG,EAAKuG,YAClBC,EAAWxG,EAAKyG,UAChBC,EAAsB9B,EAAU8B,oBAAoB,CAACJ,EAAWlD,IAAKkD,EAAWjD,KAAMmD,GAE1F,GAAIE,EAAqB,CACvB,IAAIxD,EAAK,IAAI1C,KAAK+B,MAAMH,EAAO,GAAIA,EAAO,IAC1CpC,EAAK2G,cAAczD,EAAIjB,EACzB,CACF,CAEAwC,EAAe,IAAI1E,EAAaC,EAAMC,GACtCwE,EAAajC,aAAaoC,EAAUgC,aAAe,CAAC,EAAG,IACvDnC,EAAazC,QAAQC,GACrBwC,EAAatC,UAAUC,GACvBwC,EAAUiC,iBAAmBpC,CAC/B,IACAL,EAAQ0C,YAAW,SAAUC,GACiB,SAAxCA,EAAYjB,IAAI,sBAClBiB,EAAYF,iBAAmBpC,EAEnC,IAEOA,GAAgB,CAACA,EAC1B,EAEA,QClOA,SAASuC,EAAQC,EAAGC,GAClB,OAAOD,GAAKC,GAAKD,EAAE,KAAOC,EAAE,IAAMD,EAAE,KAAOC,EAAE,EAC/C,CAEeC,EAAQC,qBAAqB,CAC1CrF,KAAM,OACNW,QAAS,WAEP,OAAOxC,KAAKgF,MACd,EACAmC,iBAAkB,SAAUjF,EAAQH,GAClC/B,KAAKoH,OAAOlF,OAASA,EACrBlC,KAAKoH,OAAOrF,KAAOA,CACrB,EACAyE,oBAAqB,SAAUtE,EAAQH,GACrC,IAAIqF,EAASpH,KAAKoH,OAClB,QAASN,EAAQ5E,EAAQkF,EAAOlF,SAAWH,IAASqF,EAAOrF,KAC7D,EACAsF,cAAe,CACbnF,OAAQ,CAAC,WAAY,WACrBH,KAAM,EAENuF,SAAU,CAAC,EAEXC,WAAY,CAAC,EAEb5B,WAAY,CAAC,EACb6B,MAAM,KC3BV,SAASC,EAAcC,GACrB,IAAK,IAAIC,KAAOD,EACd,GAAIA,EAAIE,eAAeD,GACrB,OAAO,EAIX,OAAO,CACT,CAEeV,EAAQY,oBAAoB,CACzChG,KAAM,OACNiG,OAAQ,SAAUC,EAAW7D,EAASnE,GACpC,IAAIiI,GAAY,EACZlI,EAAOiI,EAAUvF,UACjBqC,EAAe9E,EAAI6E,QAAQD,QAAQG,kBACnClB,EAAWmE,EAAUpB,iBAErBsB,EAAc,SAAUpG,EAAMqG,GAChC,IAAIF,EAAJ,CAIA,IAAIG,EAAWtD,EAAauD,WAAWA,WAAWA,WAC9C7F,EAAY,EAAE8F,SAASF,EAAShD,MAAMC,KAAM,KAAO,GAAIiD,SAASF,EAAShD,MAAME,IAAK,KAAO,GAE3FiD,EAAoBzD,EAAaM,MACjCe,EAAa3D,EAAU,GAAK,KAC5B4D,EAAY5D,EAAU,GAAK,KAE3B+F,EAAkBlD,OAASc,IAC7BoC,EAAkBlD,KAAOc,GAGvBoC,EAAkBjD,MAAQc,IAC5BmC,EAAkBjD,IAAMc,GAG1BvC,EAAStB,aAAaC,GACtBwF,EAAUrB,YAAcnE,EACxBxC,EAAIwI,eAAe,CACjB1G,KAAM,WACN2G,UAAW,CACTC,SAAU,IAtBd,CAyBF,EAEA,SAASC,IACHV,GAIJjI,EAAIwI,eAAe,CACjB1G,KAAM,WACN2G,UAAW,CACTC,SAAU,IAGhB,CAEA3I,EAAK6I,oBAAoB,SAAU3I,KAAK4I,iBACxC9I,EAAK6I,oBAAoB,UAAW3I,KAAK4I,iBACzC9I,EAAK6I,oBAAoB,UAAW3I,KAAK6I,oBACzC/I,EAAKgJ,iBAAiB,SAAUb,GAChCnI,EAAKgJ,iBAAiB,UAAWb,GACjCnI,EAAKgJ,iBAAiB,UAAWJ,GACjC1I,KAAK4I,gBAAkBX,EACvBjI,KAAK6I,mBAAqBH,EAC1B,IAAIlB,EAAOO,EAAUnC,IAAI,QAErB4B,GAAiB,UAATA,EACV1H,EAAKiJ,iBAELjJ,EAAKkJ,kBAGHxB,GAAiB,SAATA,GACV1H,EAAKmJ,wBACLnJ,EAAKoJ,wBACLpJ,EAAKqJ,sBAELrJ,EAAKsJ,yBACLtJ,EAAKuJ,yBACLvJ,EAAKwJ,sBAKP,IAAIC,EAAgBxB,EAAUyB,WAC1BC,EAAc1B,EAAUnC,IAAI,aAAe,CAAC,EAE5C8D,EAAcC,KAAKC,UAAUH,GAE7BE,KAAKC,UAAUL,KAAmBG,IAE/BjC,EAAcgC,IACjB3J,EAAK+J,YAAY5C,EAAQ6C,KAAKC,MAAMN,IAGtC1B,EAAUyB,WAAaG,KAAKK,MAAMN,IAKpC,IAAIO,EAAiBlC,EAAUmC,YAC3BC,EAAepC,EAAUnC,IAAI,eAAiB,CAAC,EAE/CwE,EAAeT,KAAKC,UAAUO,GAE9BR,KAAKC,UAAUK,KAAoBG,IAEhC3C,EAAc0C,IACjBrK,EAAKuK,cAAcpD,EAAQ6C,KAAKC,MAAMI,IAGxCpC,EAAUmC,YAAcP,KAAKK,MAAMI,IAGrCpC,GAAY,CACd,IClHFf,EAAQqD,yBAAyB,OAAQ,GAEzCrD,EAAQsD,eAAe,CACrB1I,KAAM,WACN2I,MAAO,WACPC,OAAQ,iBACP,SAAUC,EAASxG,GACpBA,EAAQO,cAAc,QAAQ,SAAUsD,GACtC,IAAIjI,EAAOiI,EAAUvF,UACjBN,EAASpC,EAAKuG,YAClB0B,EAAUZ,iBAAiB,CAACjF,EAAOgB,IAAKhB,EAAOiB,KAAMrD,EAAKyG,UAC5D,GACF,IACO,IAAIoE,EAAU,O","sources":["webpack://vue-amis-sdk/../../node_modules/.pnpm/echarts@5.4.0/node_modules/echarts/extension/bmap/BMapCoordSys.js","webpack://vue-amis-sdk/../../node_modules/.pnpm/echarts@5.4.0/node_modules/echarts/extension/bmap/BMapModel.js","webpack://vue-amis-sdk/../../node_modules/.pnpm/echarts@5.4.0/node_modules/echarts/extension/bmap/BMapView.js","webpack://vue-amis-sdk/../../node_modules/.pnpm/echarts@5.4.0/node_modules/echarts/extension/bmap/bmap.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\n\n/* global BMap */\nimport { util as zrUtil, graphic, matrix } from 'echarts';\n\nfunction BMapCoordSys(bmap, api) {\n  this._bmap = bmap;\n  this.dimensions = ['lng', 'lat'];\n  this._mapOffset = [0, 0];\n  this._api = api;\n  this._projection = new BMap.MercatorProjection();\n}\n\nBMapCoordSys.prototype.type = 'bmap';\nBMapCoordSys.prototype.dimensions = ['lng', 'lat'];\n\nBMapCoordSys.prototype.setZoom = function (zoom) {\n  this._zoom = zoom;\n};\n\nBMapCoordSys.prototype.setCenter = function (center) {\n  this._center = this._projection.lngLatToPoint(new BMap.Point(center[0], center[1]));\n};\n\nBMapCoordSys.prototype.setMapOffset = function (mapOffset) {\n  this._mapOffset = mapOffset;\n};\n\nBMapCoordSys.prototype.getBMap = function () {\n  return this._bmap;\n};\n\nBMapCoordSys.prototype.dataToPoint = function (data) {\n  var point = new BMap.Point(data[0], data[1]); // TODO mercator projection is toooooooo slow\n  // let mercatorPoint = this._projection.lngLatToPoint(point);\n  // let width = this._api.getZr().getWidth();\n  // let height = this._api.getZr().getHeight();\n  // let divider = Math.pow(2, 18 - 10);\n  // return [\n  //     Math.round((mercatorPoint.x - this._center.x) / divider + width / 2),\n  //     Math.round((this._center.y - mercatorPoint.y) / divider + height / 2)\n  // ];\n\n  var px = this._bmap.pointToOverlayPixel(point);\n\n  var mapOffset = this._mapOffset;\n  return [px.x - mapOffset[0], px.y - mapOffset[1]];\n};\n\nBMapCoordSys.prototype.pointToData = function (pt) {\n  var mapOffset = this._mapOffset;\n  pt = this._bmap.overlayPixelToPoint({\n    x: pt[0] + mapOffset[0],\n    y: pt[1] + mapOffset[1]\n  });\n  return [pt.lng, pt.lat];\n};\n\nBMapCoordSys.prototype.getViewRect = function () {\n  var api = this._api;\n  return new graphic.BoundingRect(0, 0, api.getWidth(), api.getHeight());\n};\n\nBMapCoordSys.prototype.getRoamTransform = function () {\n  return matrix.create();\n};\n\nBMapCoordSys.prototype.prepareCustoms = function () {\n  var rect = this.getViewRect();\n  return {\n    coordSys: {\n      // The name exposed to user is always 'cartesian2d' but not 'grid'.\n      type: 'bmap',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: zrUtil.bind(this.dataToPoint, this),\n      size: zrUtil.bind(dataToCoordSize, this)\n    }\n  };\n};\n\nBMapCoordSys.prototype.convertToPixel = function (ecModel, finder, value) {\n  // here we ignore finder as only one bmap component is allowed\n  return this.dataToPoint(value);\n};\n\nBMapCoordSys.prototype.convertFromPixel = function (ecModel, finder, value) {\n  return this.pointToData(value);\n};\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map([0, 1], function (dimIdx) {\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    var p1 = [];\n    var p2 = [];\n    p1[dimIdx] = val - halfSize;\n    p2[dimIdx] = val + halfSize;\n    p1[1 - dimIdx] = p2[1 - dimIdx] = dataItem[1 - dimIdx];\n    return Math.abs(this.dataToPoint(p1)[dimIdx] - this.dataToPoint(p2)[dimIdx]);\n  }, this);\n}\n\nvar Overlay; // For deciding which dimensions to use when creating list data\n\nBMapCoordSys.dimensions = BMapCoordSys.prototype.dimensions;\n\nfunction createOverlayCtor() {\n  function Overlay(root) {\n    this._root = root;\n  }\n\n  Overlay.prototype = new BMap.Overlay();\n  /**\n   * 初始化\n   *\n   * @param {BMap.Map} map\n   * @override\n   */\n\n  Overlay.prototype.initialize = function (map) {\n    map.getPanes().labelPane.appendChild(this._root);\n    return this._root;\n  };\n  /**\n   * @override\n   */\n\n\n  Overlay.prototype.draw = function () {};\n\n  return Overlay;\n}\n\nBMapCoordSys.create = function (ecModel, api) {\n  var bmapCoordSys;\n  var root = api.getDom(); // TODO Dispose\n\n  ecModel.eachComponent('bmap', function (bmapModel) {\n    var painter = api.getZr().painter;\n    var viewportRoot = painter.getViewportRoot();\n\n    if (typeof BMap === 'undefined') {\n      throw new Error('BMap api is not loaded');\n    }\n\n    Overlay = Overlay || createOverlayCtor();\n\n    if (bmapCoordSys) {\n      throw new Error('Only one bmap component can exist');\n    }\n\n    var bmap;\n\n    if (!bmapModel.__bmap) {\n      // Not support IE8\n      var bmapRoot = root.querySelector('.ec-extension-bmap');\n\n      if (bmapRoot) {\n        // Reset viewport left and top, which will be changed\n        // in moving handler in BMapView\n        viewportRoot.style.left = '0px';\n        viewportRoot.style.top = '0px';\n        root.removeChild(bmapRoot);\n      }\n\n      bmapRoot = document.createElement('div');\n      bmapRoot.className = 'ec-extension-bmap'; // fix #13424\n\n      bmapRoot.style.cssText = 'position:absolute;width:100%;height:100%';\n      root.appendChild(bmapRoot); // initializes bmap\n\n      var mapOptions = bmapModel.get('mapOptions');\n\n      if (mapOptions) {\n        mapOptions = zrUtil.clone(mapOptions); // Not support `mapType`, use `bmap.setMapType(MapType)` instead.\n\n        delete mapOptions.mapType;\n      }\n\n      bmap = bmapModel.__bmap = new BMap.Map(bmapRoot, mapOptions);\n      var overlay = new Overlay(viewportRoot);\n      bmap.addOverlay(overlay); // Override\n\n      painter.getViewportRootOffset = function () {\n        return {\n          offsetLeft: 0,\n          offsetTop: 0\n        };\n      };\n    }\n\n    bmap = bmapModel.__bmap; // Set bmap options\n    // centerAndZoom before layout and render\n\n    var center = bmapModel.get('center');\n    var zoom = bmapModel.get('zoom');\n\n    if (center && zoom) {\n      var bmapCenter = bmap.getCenter();\n      var bmapZoom = bmap.getZoom();\n      var centerOrZoomChanged = bmapModel.centerOrZoomChanged([bmapCenter.lng, bmapCenter.lat], bmapZoom);\n\n      if (centerOrZoomChanged) {\n        var pt = new BMap.Point(center[0], center[1]);\n        bmap.centerAndZoom(pt, zoom);\n      }\n    }\n\n    bmapCoordSys = new BMapCoordSys(bmap, api);\n    bmapCoordSys.setMapOffset(bmapModel.__mapOffset || [0, 0]);\n    bmapCoordSys.setZoom(zoom);\n    bmapCoordSys.setCenter(center);\n    bmapModel.coordinateSystem = bmapCoordSys;\n  });\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.get('coordinateSystem') === 'bmap') {\n      seriesModel.coordinateSystem = bmapCoordSys;\n    }\n  }); // return created coordinate systems\n\n  return bmapCoordSys && [bmapCoordSys];\n};\n\nexport default BMapCoordSys;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as echarts from 'echarts';\n\nfunction v2Equal(a, b) {\n  return a && b && a[0] === b[0] && a[1] === b[1];\n}\n\nexport default echarts.extendComponentModel({\n  type: 'bmap',\n  getBMap: function () {\n    // __bmap is injected when creating BMapCoordSys\n    return this.__bmap;\n  },\n  setCenterAndZoom: function (center, zoom) {\n    this.option.center = center;\n    this.option.zoom = zoom;\n  },\n  centerOrZoomChanged: function (center, zoom) {\n    var option = this.option;\n    return !(v2Equal(center, option.center) && zoom === option.zoom);\n  },\n  defaultOption: {\n    center: [104.114129, 37.550339],\n    zoom: 5,\n    // 2.0 http://lbsyun.baidu.com/custom/index.htm\n    mapStyle: {},\n    // 3.0 http://lbsyun.baidu.com/index.php?title=open/custom\n    mapStyleV2: {},\n    // See https://lbsyun.baidu.com/cms/jsapi/reference/jsapi_reference.html#a0b1\n    mapOptions: {},\n    roam: false\n  }\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as echarts from 'echarts';\n\nfunction isEmptyObject(obj) {\n  for (var key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport default echarts.extendComponentView({\n  type: 'bmap',\n  render: function (bMapModel, ecModel, api) {\n    var rendering = true;\n    var bmap = bMapModel.getBMap();\n    var viewportRoot = api.getZr().painter.getViewportRoot();\n    var coordSys = bMapModel.coordinateSystem;\n\n    var moveHandler = function (type, target) {\n      if (rendering) {\n        return;\n      }\n\n      var offsetEl = viewportRoot.parentNode.parentNode.parentNode;\n      var mapOffset = [-parseInt(offsetEl.style.left, 10) || 0, -parseInt(offsetEl.style.top, 10) || 0]; // only update style when map offset changed\n\n      var viewportRootStyle = viewportRoot.style;\n      var offsetLeft = mapOffset[0] + 'px';\n      var offsetTop = mapOffset[1] + 'px';\n\n      if (viewportRootStyle.left !== offsetLeft) {\n        viewportRootStyle.left = offsetLeft;\n      }\n\n      if (viewportRootStyle.top !== offsetTop) {\n        viewportRootStyle.top = offsetTop;\n      }\n\n      coordSys.setMapOffset(mapOffset);\n      bMapModel.__mapOffset = mapOffset;\n      api.dispatchAction({\n        type: 'bmapRoam',\n        animation: {\n          duration: 0\n        }\n      });\n    };\n\n    function zoomEndHandler() {\n      if (rendering) {\n        return;\n      }\n\n      api.dispatchAction({\n        type: 'bmapRoam',\n        animation: {\n          duration: 0\n        }\n      });\n    }\n\n    bmap.removeEventListener('moving', this._oldMoveHandler);\n    bmap.removeEventListener('moveend', this._oldMoveHandler);\n    bmap.removeEventListener('zoomend', this._oldZoomEndHandler);\n    bmap.addEventListener('moving', moveHandler);\n    bmap.addEventListener('moveend', moveHandler);\n    bmap.addEventListener('zoomend', zoomEndHandler);\n    this._oldMoveHandler = moveHandler;\n    this._oldZoomEndHandler = zoomEndHandler;\n    var roam = bMapModel.get('roam');\n\n    if (roam && roam !== 'scale') {\n      bmap.enableDragging();\n    } else {\n      bmap.disableDragging();\n    }\n\n    if (roam && roam !== 'move') {\n      bmap.enableScrollWheelZoom();\n      bmap.enableDoubleClickZoom();\n      bmap.enablePinchToZoom();\n    } else {\n      bmap.disableScrollWheelZoom();\n      bmap.disableDoubleClickZoom();\n      bmap.disablePinchToZoom();\n    }\n    /* map 2.0 */\n\n\n    var originalStyle = bMapModel.__mapStyle;\n    var newMapStyle = bMapModel.get('mapStyle') || {}; // FIXME, Not use JSON methods\n\n    var mapStyleStr = JSON.stringify(newMapStyle);\n\n    if (JSON.stringify(originalStyle) !== mapStyleStr) {\n      // FIXME May have blank tile when dragging if setMapStyle\n      if (!isEmptyObject(newMapStyle)) {\n        bmap.setMapStyle(echarts.util.clone(newMapStyle));\n      }\n\n      bMapModel.__mapStyle = JSON.parse(mapStyleStr);\n    }\n    /* map 3.0 */\n\n\n    var originalStyle2 = bMapModel.__mapStyle2;\n    var newMapStyle2 = bMapModel.get('mapStyleV2') || {}; // FIXME, Not use JSON methods\n\n    var mapStyleStr2 = JSON.stringify(newMapStyle2);\n\n    if (JSON.stringify(originalStyle2) !== mapStyleStr2) {\n      // FIXME May have blank tile when dragging if setMapStyle\n      if (!isEmptyObject(newMapStyle2)) {\n        bmap.setMapStyleV2(echarts.util.clone(newMapStyle2));\n      }\n\n      bMapModel.__mapStyle2 = JSON.parse(mapStyleStr2);\n    }\n\n    rendering = false;\n  }\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\n\n/**\n * BMap component extension\n */\nimport * as echarts from 'echarts';\nimport BMapCoordSys from './BMapCoordSys.js';\nimport './BMapModel.js';\nimport './BMapView.js';\necharts.registerCoordinateSystem('bmap', BMapCoordSys); // Action\n\necharts.registerAction({\n  type: 'bmapRoam',\n  event: 'bmapRoam',\n  update: 'updateLayout'\n}, function (payload, ecModel) {\n  ecModel.eachComponent('bmap', function (bMapModel) {\n    var bmap = bMapModel.getBMap();\n    var center = bmap.getCenter();\n    bMapModel.setCenterAndZoom([center.lng, center.lat], bmap.getZoom());\n  });\n});\nexport var version = '1.0.0';"],"names":["Overlay","BMapCoordSys","bmap","api","this","_bmap","dimensions","_mapOffset","_api","_projection","BMap","MercatorProjection","dataToCoordSize","dataSize","dataItem","dimIdx","val","halfSize","p1","p2","Math","abs","dataToPoint","createOverlayCtor","root","_root","prototype","initialize","map","getPanes","labelPane","appendChild","draw","type","setZoom","zoom","_zoom","setCenter","center","_center","lngLatToPoint","Point","setMapOffset","mapOffset","getBMap","data","point","px","pointToOverlayPixel","x","y","pointToData","pt","overlayPixelToPoint","lng","lat","getViewRect","graphic","getWidth","getHeight","getRoamTransform","matrix","prepareCustoms","rect","coordSys","width","height","coord","size","convertToPixel","ecModel","finder","value","convertFromPixel","create","bmapCoordSys","getDom","eachComponent","bmapModel","painter","getZr","viewportRoot","getViewportRoot","Error","__bmap","bmapRoot","querySelector","style","left","top","removeChild","document","createElement","className","cssText","mapOptions","get","mapType","Map","overlay","addOverlay","getViewportRootOffset","offsetLeft","offsetTop","bmapCenter","getCenter","bmapZoom","getZoom","centerOrZoomChanged","centerAndZoom","__mapOffset","coordinateSystem","eachSeries","seriesModel","v2Equal","a","b","echarts","extendComponentModel","setCenterAndZoom","option","defaultOption","mapStyle","mapStyleV2","roam","isEmptyObject","obj","key","hasOwnProperty","extendComponentView","render","bMapModel","rendering","moveHandler","target","offsetEl","parentNode","parseInt","viewportRootStyle","dispatchAction","animation","duration","zoomEndHandler","removeEventListener","_oldMoveHandler","_oldZoomEndHandler","addEventListener","enableDragging","disableDragging","enableScrollWheelZoom","enableDoubleClickZoom","enablePinchToZoom","disableScrollWheelZoom","disableDoubleClickZoom","disablePinchToZoom","originalStyle","__mapStyle","newMapStyle","mapStyleStr","JSON","stringify","setMapStyle","util","clone","parse","originalStyle2","__mapStyle2","newMapStyle2","mapStyleStr2","setMapStyleV2","registerCoordinateSystem","registerAction","event","update","payload","version"],"sourceRoot":""}